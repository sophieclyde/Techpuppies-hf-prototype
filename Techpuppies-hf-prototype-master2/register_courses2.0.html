<!DOCTYPE html>
<html lang="en">
<head>
  <title>Registration</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="style2.0.css">
  <link rel="stylesheet" href="style2.2.0.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  
</head>
<body>

<!--Navigation Bar-->
<nav class="navbar navbar-expand-lg navbar-light" id = "navigation-background">
		<img src="logo.png" class="img-responsive" alt="logo" height="40">
        <a class="navbar-brand" id="navigationText" href="Home2.0.html" >Registration</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item">
                <a class="nav-link" href="Home2.0.html" id = "navigationText">Information<span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="planning_page2.0.html" id = "navigationText">Planning</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="registration2.0.html" id = "navigationText">Registration</a>
              </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-secondary my-2 my-sm-0" type="submit" id ="navigationText">Search</button>
            </form>
            <div class="btn-toolbar">
                <button class="btn btn-outline-secondary my-2 my-sm-0" type="button" id ="navigationText">Log In</button>
            </div>
          </div>
      </nav>

<br>
<a href="registration2.0.html" class="previous previousMargin" id="tableText">&laquo; Previous</a>
    <br>
  <h1 id="page-header">Registration</h1>
  <br>

  <div class="col-lg-10 col-md-10 col-sm-10 dropdown-center" id="big-table">
    <table class = "table">
      <thead>
      <tr>
        <th>
        <th>Sunday</th>
        <th>Monday</th>
        <th>Tuesday</th>
        <th>Wednesday</th>
        <th>Thursday</th>
        <th>Friday</th>
        <th>Saturday</th>
      </tr>
    </thead>
      <tr>
        <td>8:00 a.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>9:00 a.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>10:00 a.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>11:00 a.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>12:00 p.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>1:00 p.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>2:00 p.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>3:00 p.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>4:00 p.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>5:00 p.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>6:00 p.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      <tr>
        <td>7:00 p.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>8:00 p.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>9:00 p.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>10:00 p.m.</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
  </div>
<p>

<div class="col-xl-10 col-lg-11 col-md-12 col-sm-12 col-12" id = "big-table">
<table id="big-table" class = "table table-striped" style="width:50% align-center">
  <thead>
    <tr id = "saved-courses-stripe">
      <th id = "tableText">Preferred Schedule</th>
      <th>Add</th>
      <td id = "saved-courses-checkbox">
        <form>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="materialUnchecked" onclick="addCourse(document.getElementById('pos1').innerHTML); addCourse(document.getElementById('pos2').innerHTML); addCourse(document.getElementById('pos3').innerHTML); addCourse(document.getElementById('pos4').innerHTML); addCourse(document.getElementById('pos5').innerHTML);">
            </div>
        </form>
       </td>
    </tr>
  </thead>
  <tr>
    <td id = "pos1"></td>
    <td></td>
    <td>
      <form>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="materialUnchecked" onclick="addCourse(document.getElementById('pos1').innerHTML)">
        </div>
      </form>
    </td>
  </tr>
  <tr>
    <td id = "pos2"></td>
    <td></td>
    <td>
      <form>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="materialUnchecked" onclick="addCourse(document.getElementById('pos2').innerHTML)">
        </div>
      </form>
    </td>
  </tr>
  <tr>
    <td id = "pos3"></td>
    <td></td>
    <td>
      <form>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="materialUnchecked" onclick="addCourse(document.getElementById('pos3').innerHTML)">
        </div>
      </form>
    </td>
  </tr>
  <tr>
    <td id = "pos4"></td>
    <td></td>
    <td>
      <form>
        <form>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="materialUnchecked" onclick="addCourse(document.getElementById('pos4').innerHTML)">
          </div>
        </form>
    </td>
  </tr>
  <tr>
    <td id = "pos5"></td>
    <td></td>
    <td>
      <form>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="materialUnchecked" onclick="addCourse(document.getElementById('pos5').innerHTML)">
        </div>
      </form>
    </td>
  </tr>
</table>
</div>

<div class="col-xl-10 col-lg-11 col-md-12 col-sm-12 col-12" id = "big-table">
<table id="big-table" class = "table table-striped" style="width:50% align-center">
  <thead>
    <tr id = "saved-courses-stripe">
      <th id = "tableText">Saved Courses</th>
      <th></th>
      <th>Add</th>
    </tr>
  </thead>
  <tr>
    <td id = "sav1"></td>
      <td></td>
      <td>
          <form>
              <div class="form-check">
                  <input type="checkbox" class="form-check-input" id="materialUnchecked" onclick="addCourse(document.getElementById('sav1').innerHTML)">
              </div>
          </form>
      </td>
  </tr>
  <tr>
    <td id = "sav2"></td>
      <td></td>
      <td>
          <form>
              <div class="form-check">
                  <input type="checkbox" class="form-check-input" id="materialUnchecked" onclick="addCourse(document.getElementById('sav2').innerHTML)">
              </div>
          </form>
      </td>
  </tr>
    <tr>
        <td id = "sav3"></td>
        <td></td>
        <td>
            <form>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="materialUnchecked" onclick="addCourse(document.getElementById('sav3').innerHTML)">
                </div>
            </form>
        </td>
    </tr>
    <tr>
        <td id = "sav4"></td>
        <td></td>
        <td>
            <form>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="materialUnchecked" onclick="addCourse(document.getElementById('sav4').innerHTML)">
                </div>
            </form>
        </td>
    </tr>
    <tr>
        <td id = "sav5"></td>
        <td></td>
        <td>
            <form>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="materialUnchecked" onclick="addCourse(document.getElementById('sav5').innerHTML)">
                </div>
            </form>
        </td>
    </tr>
</table>
</div>

<div class = "col-xl-10 col-lg-11 col-md-12 col-sm-12 col-12" id = "big-table">
<button type = "submit" class = "btn btn-primary btn-block" style = "align-center" id = "ssButtonText" onclick = "registerForCourses()">Register for Selected Courses</button>
</div>

    <script>
        window.onload = displaySavedScheduleAndCourses();
        
        function displaySavedScheduleAndCourses(){
            
            //Step 1: retrieve the saved schedule, saved courses and any registered courses
            if (window.sessionStorage.getItem("savedSchedule") != null){
                var savedSchedule = window.sessionStorage.getItem("savedSchedule").split(",");
                savedSchedule.sort();
            } else{
                console.log("No Saved Schedule");
                var savedSchedule = new Array(0);
            }
            if (window.sessionStorage.getItem("savedCourses") != null){
                var savedCourses = window.sessionStorage.getItem("savedCourses").split(",");
                savedCourses.sort();
            } else{
                console.log("No Saved Courses");
                var savedCourses = new Array(0);
            }
            if (window.sessionStorage.getItem("registeredCourses") != null){
                var registeredCourses = window.sessionStorage.getItem("registeredCourses").split(",");
                registeredCourses.sort();
            } else{
                console.log("No Registered Courses");
                var registeredCourses = new Array(0);
            }
            
            //Step 2: Remove course from saved course and saved schedule if it is also in registeredCourses
            for (var i = 0; i < registeredCourses.length; i++){
                if (savedCourses.indexOf(registeredCourses[i]) != -1){
                    savedCourses.splice(registeredCourses[i],1);
                }
                if (savedSchedule.indexOf(registeredCourses[i]) != -1){
                    savedSchedule.splice(registeredCourses[i],1);
                }
            }
            
            //Step 3: Change page text to reflect all saved schedules and saved courses
            for (var i = 0; i < 5; i++){
                if (i < savedSchedule.length){
                    document.getElementById("pos" + (i+1)).innerHTML = savedSchedule[i];
                } else{
                    if (savedSchedule.length > 0){
                        document.getElementById("pos" + (i+1)).innerHTML = "N/a";
                    } else{
                        document.getElementById("pos" + (i+1)).innerHTML = "No Saved Schedule";
                    }
                }
            }
            
            for (var i = 0; i < 5; i++){
                if (i < savedCourses.length){
                    if (savedSchedule.indexOf(savedCourses[i]) == -1){
                        document.getElementById("sav" + (i+1)).innerHTML = savedCourses[i];
                    } else{
                        document.getElementById("sav" + (i+1)).innerHTML = "No Saved Course";
                    }
                } else{
                    document.getElementById("sav" + (i+1)).innerHTML = "No Saved Course";
                }
            }
        }
        
        var registerCourses = new Array(0);
    
        function addCourse(courseName){
            if (registerCourses.indexOf(courseName) != -1){
                registerCourses.splice(registerCourses.indexOf(courseName),1);
            } else{
                registerCourses.push(courseName);
            }
            console.log(registerCourses);
        }
    
        function registerForCourses() {
            var savedList = "\n";
            for (var i = 0; i < registerCourses.length; i++) {
                savedList = savedList + "\n" + registerCourses[i];
            }
            console.log(savedList);
            var c = confirm("Do you want to register for these courses?" + savedList);
            if (c==true){
                if (registerCourses.length > 3){
                    var registeredCourses = registerCourses.slice(0,3);
                } else{
                    var registeredCourses = registerCourses.slice(0);
                }
                savedList = "\n";
                for (var i = 0; i < registeredCourses.length; i++) {
                    savedList = savedList + "\n" + registeredCourses[i];
                    }
                alert("You have succesfully registered for these courses:" + savedList + "\n\nIf you wish to register for more courses, click the checkbox next to that course and hit the register button again. You can see and edit your registered courses on the Current Registration page.");
                if (window.sessionStorage.getItem("registeredCourses") != null){
                    registeredCourses = registeredCourses.concat(window.sessionStorage.getItem("registeredCourses"));
                }
                if (typeof(Storage) !== "undefined") {
                    // Store
                    console.log(registeredCourses);
                    window.sessionStorage.setItem("registeredCourses", registeredCourses);
                } else {
                    document.getElementById("result").innerHTML = "Your browser does not support Web Storage...";
                }
                //reload page to refresh courses
                location.reload();
                }
            }
    </script>


</body>
</html>